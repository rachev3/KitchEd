@model IEnumerable<CourseViewModel>

@{
    ViewData["Title"] = "Курсове - KitchEd";
}

<div class="courses-header py-4">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6">
                <h1 class="mb-0">
                    <i class="fas fa-graduation-cap me-2"></i>
                    Налични курсове
                </h1>
            </div>
            <div class="col-md-6">
                <form id="filterForm" class="d-flex gap-2">
                    <input type="text" class="form-control" id="searchInput" placeholder="Търсене по заглавие...">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-search"></i>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="container py-4">
    @if (!Model.Any())
    {
        <div class="alert alert-info" role="alert">
            <i class="fas fa-info-circle me-2"></i>
            В момента няма налични курсове.
        </div>
    }
    else
    {
        <div class="row g-4">
            @foreach (var course in Model)
            {
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 course-card">
                        <img src="@course.MainImageUrl" class="card-img-top" alt="@course.Title">
                        <div class="card-body">
                            <h5 class="card-title">@course.Title</h5>
                            <p class="card-text text-muted mb-2">
                                <small>
                                    <i class="fas fa-tag me-1"></i> @course.CategoryName
                                    <span class="mx-2">|</span>
                                    <i class="fas fa-utensils me-1"></i> @course.DishTypeName
                                </small>
                            </p>
                            <p class="card-text description-text">@course.Description</p>
                            <div class="course-details">
                                <div class="detail-item">
                                    <i class="fas fa-graduation-cap"></i>
                                    <span>@course.SkillLevelName</span>
                                </div>
                                <div class="detail-item">
                                    <i class="fas fa-calendar"></i>
                                    <span>@course.StartDate.ToString("dd.MM.yyyy")</span>
                                </div>
                                <div class="detail-item">
                                    <i class="fas fa-coins"></i>
                                    <span>@course.Price.ToString("F2") лв.</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer bg-transparent border-top-0">
                            <a asp-action="Details" asp-route-id="@course.CourseId" class="btn btn-primary w-100">
                                <i class="fas fa-info-circle me-2"></i>Детайли
                            </a>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</div>

@section Styles {
    <style>
        .courses-header {
            background-color: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }

        .course-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border: none;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        }

        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        }

        .course-card .card-img-top {
            height: 200px;
            object-fit: cover;
        }

        .description-text {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            height: 4.5rem;
        }

        .course-details {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #dee2e6;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #6c757d;
            font-size: 0.9rem;
        }

        #filterForm {
            max-width: 400px;
            margin-left: auto;
        }
@* 
        @media (max-width: 768px) {
            .courses-header h1 {
                font-size: 1.5rem;
                margin-bottom: 1rem;
            }

            #filterForm {
                margin: 1rem 0;
            }
        } *@
    </style>
}

@section Scripts {
    <script>
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchText = e.target.value.toLowerCase();
            const courseCards = document.querySelectorAll('.course-card');

            courseCards.forEach(card => {
                const title = card.querySelector('.card-title').textContent.toLowerCase();
                const description = card.querySelector('.description-text').textContent.toLowerCase();
                const category = card.querySelector('.fa-tag').nextElementSibling.textContent.toLowerCase();

                if (title.includes(searchText) || description.includes(searchText) || category.includes(searchText)) {
                    card.closest('.col-md-6').style.display = '';
                } else {
                    card.closest('.col-md-6').style.display = 'none';
                }
            });
        });

        document.getElementById('filterForm').addEventListener('submit', function(e) {
            e.preventDefault();
        });
    </script>
}
